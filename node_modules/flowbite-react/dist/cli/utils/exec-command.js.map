{"version":3,"file":"exec-command.js","sources":["../../../src/cli/utils/exec-command.ts"],"sourcesContent":["import { spawn, type SpawnOptions } from \"child_process\";\n\n/**\n * Runs a shell command asynchronously and captures its output.\n *\n * @param {string} command - The command to execute (e.g., \"npm\").\n * @param {string[]} [args=[]] - Arguments for the command (e.g., [\"install\", \"package-name\"]).\n * @param {SpawnOptions} [options={}] - Optional spawn configuration options.\n * @returns {Promise<{ stdout: string; stderr: string; exitCode: number }>} - Resolves with command output and exit code.\n * @throws {Error} If the process exits with a non-zero code.\n */\nexport function execCommand(\n  command: string,\n  args: string[] = [],\n  options: SpawnOptions = {},\n): Promise<{ stdout: string; stderr: string; exitCode: number }> {\n  return new Promise((resolve, reject) => {\n    const child = spawn(command, args, { ...options, shell: true });\n\n    let stdout = \"\";\n    let stderr = \"\";\n\n    if (child.stdout) {\n      child.stdout.on(\"data\", (data) => {\n        stdout += data.toString();\n      });\n    }\n\n    if (child.stderr) {\n      child.stderr.on(\"data\", (data) => {\n        stderr += data.toString();\n      });\n    }\n\n    child.on(\"close\", (code) => {\n      if (code === 0) {\n        resolve({ stdout, stderr, exitCode: code || 0 });\n      } else {\n        reject(new Error(`Process exited with code ${code}: ${stderr}`));\n      }\n    });\n\n    child.on(\"error\", (err) => {\n      reject(err);\n    });\n  });\n}\n"],"names":[],"mappings":";;AAEO,SAAS,WAAW,CAAC,OAAO,EAAE,IAAI,GAAG,EAAE,EAAE,OAAO,GAAG,EAAE,EAAE;AAC9D,EAAE,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC1C,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,GAAG,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AACnE,IAAI,IAAI,MAAM,GAAG,EAAE;AACnB,IAAI,IAAI,MAAM,GAAG,EAAE;AACnB,IAAI,IAAI,KAAK,CAAC,MAAM,EAAE;AACtB,MAAM,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,KAAK;AACxC,QAAQ,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;AACjC,OAAO,CAAC;AACR;AACA,IAAI,IAAI,KAAK,CAAC,MAAM,EAAE;AACtB,MAAM,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,KAAK;AACxC,QAAQ,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;AACjC,OAAO,CAAC;AACR;AACA,IAAI,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,KAAK;AAChC,MAAM,IAAI,IAAI,KAAK,CAAC,EAAE;AACtB,QAAQ,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC;AACxD,OAAO,MAAM;AACb,QAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,CAAC,yBAAyB,EAAE,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;AACxE;AACA,KAAK,CAAC;AACN,IAAI,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,KAAK;AAC/B,MAAM,MAAM,CAAC,GAAG,CAAC;AACjB,KAAK,CAAC;AACN,GAAG,CAAC;AACJ;;;;"}