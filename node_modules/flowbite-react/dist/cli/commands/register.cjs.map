{"version":3,"file":"register.cjs","sources":["../../../src/cli/commands/register.ts"],"sourcesContent":["import { spawn } from \"child_process\";\nimport fs from \"fs/promises\";\nimport path from \"path\";\nimport { automaticClassGenerationMessage, outputDir, processIdFile } from \"../consts\";\nimport { getConfig } from \"../utils/get-config\";\nimport { setupOutputDirectory } from \"./setup-output-directory\";\n\nexport async function register() {\n  const config = await getConfig();\n\n  if (config.components.length) {\n    console.warn(automaticClassGenerationMessage);\n  }\n\n  const processIdFilePath = path.join(outputDir, processIdFile);\n\n  try {\n    // clean up old process\n    const pid = await fs.readFile(processIdFilePath, \"utf8\");\n    process.kill(parseInt(pid, 10));\n    await fs.unlink(processIdFilePath);\n  } catch {\n    //\n  }\n\n  try {\n    // run `flowbite-react dev` in background\n    const devProcess = spawn(\"flowbite-react\", [\"dev\"], {\n      stdio: \"ignore\",\n      detached: true,\n      shell: true,\n    });\n\n    await setupOutputDirectory();\n\n    if (devProcess.pid) {\n      await fs.writeFile(processIdFilePath, devProcess.pid.toString(), { flag: \"w\" });\n    }\n  } catch (error) {\n    console.error(\"Failed to register flowbite-react\", error);\n  }\n\n  process.exit();\n}\n"],"names":["getConfig","automaticClassGenerationMessage","outputDir","processIdFile","spawn","setupOutputDirectory"],"mappings":";;;;;;;;;AAOO,eAAe,QAAQ,GAAG;AACjC,EAAE,MAAM,MAAM,GAAG,MAAMA,mBAAS,EAAE;AAClC,EAAE,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE;AAChC,IAAI,OAAO,CAAC,IAAI,CAACC,sCAA+B,CAAC;AACjD;AACA,EAAE,MAAM,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAACC,gBAAS,EAAEC,oBAAa,CAAC;AAC/D,EAAE,IAAI;AACN,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,MAAM,CAAC;AAC5D,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AACnC,IAAI,MAAM,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC;AACtC,GAAG,CAAC,MAAM;AACV;AACA,EAAE,IAAI;AACN,IAAI,MAAM,UAAU,GAAGC,mBAAK,CAAC,gBAAgB,EAAE,CAAC,KAAK,CAAC,EAAE;AACxD,MAAM,KAAK,EAAE,QAAQ;AACrB,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,KAAK,EAAE;AACb,KAAK,CAAC;AACN,IAAI,MAAMC,yCAAoB,EAAE;AAChC,IAAI,IAAI,UAAU,CAAC,GAAG,EAAE;AACxB,MAAM,MAAM,EAAE,CAAC,SAAS,CAAC,iBAAiB,EAAE,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACrF;AACA,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC;AAC7D;AACA,EAAE,OAAO,CAAC,IAAI,EAAE;AAChB;;;;"}