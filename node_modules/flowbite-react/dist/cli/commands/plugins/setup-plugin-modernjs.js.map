{"version":3,"file":"setup-plugin-modernjs.js","sources":["../../../../src/cli/commands/plugins/setup-plugin-modernjs.ts"],"sourcesContent":["import fs from \"fs/promises\";\nimport cjson from \"comment-json\";\nimport { pluginName, pluginPath } from \"../../consts\";\nimport { addPluginToConfig } from \"../../utils/add-plugin-to-config\";\nimport { joinNormalizedPath } from \"../../utils/normalize-path\";\n\nexport async function setupPluginModernjs(configPath: string) {\n  await addPluginToConfig({\n    configKey: \"plugins\",\n    configPath,\n    pluginImportPath: joinNormalizedPath(pluginPath, \"modernjs\"),\n    pluginName,\n  });\n\n  // TODO: remove when `node/node10` moduleResolution is fixed in the build process\n  // update `tsconfig.json` compilerOptions `module` and `moduleResolution`\n  const tsConfigFile = \"tsconfig.json\";\n\n  try {\n    const content = await fs.readFile(tsConfigFile, \"utf-8\");\n    const parsedContent: { compilerOptions?: Record<string, unknown> } = cjson.parse(content) as typeof parsedContent;\n\n    const defaultTsConfig = {\n      module: \"ESNext\",\n      moduleResolution: \"bundler\",\n    };\n\n    if (\n      parsedContent.compilerOptions?.module !== defaultTsConfig.module ||\n      parsedContent.compilerOptions?.moduleResolution !== defaultTsConfig.moduleResolution\n    ) {\n      parsedContent.compilerOptions ||= {};\n      parsedContent.compilerOptions.module = \"ESNext\";\n      parsedContent.compilerOptions.moduleResolution = \"bundler\";\n\n      console.log(`Updating ${tsConfigFile} file with flowbite-react configuration...`);\n      await fs.writeFile(tsConfigFile, cjson.stringify(parsedContent, null, 2), \"utf-8\");\n    }\n  } catch (error) {\n    console.error(`Failed to update ${tsConfigFile} file...`, error);\n  }\n}\n"],"names":["fs"],"mappings":";;;;;;AAMO,eAAe,mBAAmB,CAAC,UAAU,EAAE;AACtD,EAAE,MAAM,iBAAiB,CAAC;AAC1B,IAAI,SAAS,EAAE,SAAS;AACxB,IAAI,UAAU;AACd,IAAI,gBAAgB,EAAE,kBAAkB,CAAC,UAAU,EAAE,UAAU,CAAC;AAChE,IAAI;AACJ,GAAG,CAAC;AACJ,EAAE,MAAM,YAAY,GAAG,eAAe;AACtC,EAAE,IAAI;AACN,IAAI,MAAM,OAAO,GAAG,MAAMA,WAAE,CAAC,QAAQ,CAAC,YAAY,EAAE,OAAO,CAAC;AAC5D,IAAI,MAAM,aAAa,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC;AAC9C,IAAI,MAAM,eAAe,GAAG;AAC5B,MAAM,MAAM,EAAE,QAAQ;AACtB,MAAM,gBAAgB,EAAE;AACxB,KAAK;AACL,IAAI,IAAI,aAAa,CAAC,eAAe,EAAE,MAAM,KAAK,eAAe,CAAC,MAAM,IAAI,aAAa,CAAC,eAAe,EAAE,gBAAgB,KAAK,eAAe,CAAC,gBAAgB,EAAE;AAClK,MAAM,aAAa,CAAC,eAAe,KAAK,aAAa,CAAC,eAAe,GAAG,EAAE,CAAC;AAC3E,MAAM,aAAa,CAAC,eAAe,CAAC,MAAM,GAAG,QAAQ;AACrD,MAAM,aAAa,CAAC,eAAe,CAAC,gBAAgB,GAAG,SAAS;AAChE,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,YAAY,CAAC,0CAA0C,CAAC,CAAC;AACvF,MAAM,MAAMA,WAAE,CAAC,SAAS,CAAC,YAAY,EAAE,KAAK,CAAC,SAAS,CAAC,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC;AACxF;AACA,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,iBAAiB,EAAE,YAAY,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC;AACpE;AACA;;;;"}