{"version":3,"file":"setup-plugin-bun.js","sources":["../../../../src/cli/commands/plugins/setup-plugin-bun.ts"],"sourcesContent":["import fs from \"fs/promises\";\nimport toml from \"@iarna/toml\";\nimport { pluginName, pluginPath } from \"../../consts\";\nimport { joinNormalizedPath } from \"../../utils/normalize-path\";\nimport { updateBuildConfig } from \"../../utils/update-build-config\";\n\nexport async function setupPluginBun(configPath: string) {\n  try {\n    // update bunfig.toml\n    const bunfig = await fs.readFile(configPath, \"utf-8\");\n    const bunfigContent = toml.parse(bunfig) as { serve?: { static?: { plugins?: string[] } } };\n    const bunPluginPath = joinNormalizedPath(pluginPath, \"bun\");\n\n    if (bunfigContent.serve?.static?.plugins?.includes(pluginName)) {\n      return;\n    }\n\n    bunfigContent.serve ??= {};\n    bunfigContent.serve.static ??= {};\n    bunfigContent.serve.static.plugins ??= [];\n\n    if (!bunfigContent.serve.static.plugins.includes(bunPluginPath)) {\n      bunfigContent.serve.static.plugins.push(bunPluginPath);\n\n      console.log(`Updating ${configPath} with flowbite-react configuration...`);\n      await fs.writeFile(configPath, toml.stringify(bunfigContent), \"utf-8\");\n    }\n\n    // update build.ts\n    const buildConfigPath = \"build.ts\";\n    const buildConfig = await fs.readFile(buildConfigPath, \"utf-8\");\n    const updatedBuildConfig = updateBuildConfig({\n      content: buildConfig,\n      pluginName,\n      pluginImportPath: bunPluginPath,\n    });\n\n    if (buildConfig !== updatedBuildConfig) {\n      console.log(`Updating ${buildConfigPath} with flowbite-react configuration...`);\n      await fs.writeFile(buildConfigPath, updatedBuildConfig, \"utf-8\");\n    }\n  } catch (error) {\n    console.error(`Failed to update ${configPath} file...`, error);\n  }\n}\n"],"names":["fs"],"mappings":";;;;;;AAMO,eAAe,cAAc,CAAC,UAAU,EAAE;AACjD,EAAE,IAAI,EAAE,EAAE,EAAE;AACZ,EAAE,IAAI;AACN,IAAI,MAAM,MAAM,GAAG,MAAMA,WAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,OAAO,CAAC;AACzD,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAC5C,IAAI,MAAM,aAAa,GAAG,kBAAkB,CAAC,UAAU,EAAE,KAAK,CAAC;AAC/D,IAAI,IAAI,aAAa,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,UAAU,CAAC,EAAE;AACpE,MAAM;AACN;AACA,IAAI,aAAa,CAAC,KAAK,KAAK,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;AACrD,IAAI,CAAC,EAAE,GAAG,aAAa,CAAC,KAAK,EAAE,MAAM,KAAK,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC;AACzD,IAAI,CAAC,EAAE,GAAG,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,KAAK,EAAE,CAAC,OAAO,GAAG,EAAE,CAAC;AAClE,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;AACrE,MAAM,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC;AAC5D,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,UAAU,CAAC,qCAAqC,CAAC,CAAC;AAChF,MAAM,MAAMA,WAAE,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,OAAO,CAAC;AAC5E;AACA,IAAI,MAAM,eAAe,GAAG,UAAU;AACtC,IAAI,MAAM,WAAW,GAAG,MAAMA,WAAE,CAAC,QAAQ,CAAC,eAAe,EAAE,OAAO,CAAC;AACnE,IAAI,MAAM,kBAAkB,GAAG,iBAAiB,CAAC;AACjD,MAAM,OAAO,EAAE,WAAW;AAC1B,MAAM,UAAU;AAChB,MAAM,gBAAgB,EAAE;AACxB,KAAK,CAAC;AACN,IAAI,IAAI,WAAW,KAAK,kBAAkB,EAAE;AAC5C,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,eAAe,CAAC,qCAAqC,CAAC,CAAC;AACrF,MAAM,MAAMA,WAAE,CAAC,SAAS,CAAC,eAAe,EAAE,kBAAkB,EAAE,OAAO,CAAC;AACtE;AACA,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,iBAAiB,EAAE,UAAU,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC;AAClE;AACA;;;;"}